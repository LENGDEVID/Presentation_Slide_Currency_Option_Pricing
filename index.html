<!DOCTYPE html>
<html lang="en"><head>
<script src="presentation_files/libs/clipboard/clipboard.min.js"></script>
<script src="presentation_files/libs/quarto-html/tabby.min.js"></script>
<script src="presentation_files/libs/quarto-html/popper.min.js"></script>
<script src="presentation_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="presentation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="presentation_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="presentation_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.25">

  <meta name="author" content="Group Members: Leng Devid, Hem Bellyday, Phal Menghak, Lot Soklang Professor: Dr.&nbsp;LUEY Sokea">
  <title>Garman-Kohlhagen European Currency Option Pricing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="presentation_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="presentation_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="presentation_files/libs/revealjs/dist/theme/quarto-4775203abba70060a3f3d230391c52e9.css">
  <link href="presentation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="presentation_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="presentation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="presentation_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="presentation_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="presentation_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Garman-Kohlhagen European Currency Option Pricing</h1>
  <p class="subtitle">From Theory to Implementation: A Complete PDE Analysis</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Group Members:<br>Leng Devid, Hem Bellyday, Phal Menghak, Lot Soklang<br><br>Professor: Dr.&nbsp;LUEY Sokea 
</div>
</div>
</div>

  <p class="date">today</p>
</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/part-i-theory-foundations" id="/toc-part-i-theory-foundations">Part I: Theory &amp; Foundations</a></li>
<li><a href="#/part-ii-analytical-solution" id="/toc-part-ii-analytical-solution">Part II: Analytical Solution</a></li>
<li><a href="#/part-iii-the-greeks" id="/toc-part-iii-the-greeks">Part III: The Greeks</a></li>
<li><a href="#/part-iv-numerical-methods" id="/toc-part-iv-numerical-methods">Part IV: Numerical Methods</a></li>
<li><a href="#/part-v-stability-analysis" id="/toc-part-v-stability-analysis">Part V: Stability Analysis</a></li>
<li><a href="#/part-vi-convergence-analysis" id="/toc-part-vi-convergence-analysis">Part VI: Convergence Analysis</a></li>
<li><a href="#/part-vii-results-visualization" id="/toc-part-vii-results-visualization">Part VII: Results &amp; Visualization</a></li>
<li><a href="#/part-viii-performance-recommendations" id="/toc-part-viii-performance-recommendations">Part VIII: Performance &amp; Recommendations</a></li>
<li><a href="#/part-ix-conclusions" id="/toc-part-ix-conclusions">Part IX: Conclusions</a></li>
<li><a href="#/conclusion" id="/toc-conclusion">Conclusion</a></li>
</ul>
</nav>
</section>
<section class="slide level2">

<!-- ---
title: "Garman-Kohlhagen European Currency Option Pricing"
subtitle: "From Theory to Implementation: A Complete PDE Analysis"
author: "Group Members:<br>Leng Devid, Hem Bellyday, Phal Menghak, Lot Soklang<br><br>Professor: Dr. LUEY Sokea"
date: today
format:
  revealjs:
    theme: [default, custom.scss]
    slide-number: true
    show-slide-number: all
    chalkboard: true
    preview-links: auto
    transition: slide
    background-transition: fade
    code-fold: true
    code-tools: true
    scrollable: true
    smaller: false
    incremental: false
    embed-resources: false 
    output-file: index.html 
    footer: "Garman-Kohlhagen FX Option Pricing | Group Project"
    toc: true
    toc-depth: 1
jupyter: python3
--- -->
</section>
<section id="overview" class="slide level2 scrollable">
<h2>Overview</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="project-scope">Project Scope</h3>
<ul>
<li><strong>Analytical Derivation</strong>: From SDE to PDE</li>
<li><strong>Closed-Form Solutions</strong>: Garman-Kohlhagen formulas</li>
<li><strong>Numerical Methods</strong>: FTCS, BTCS, Crank-Nicolson</li>
<li><strong>Validation</strong>: Stability, convergence, accuracy</li>
<li><strong>Greeks</strong>: Analytical and numerical computation</li>
</ul>
</div><div class="column" style="width:50%;">
<h3 id="key-deliverables">Key Deliverables</h3>
<p>✓ Complete mathematical framework<br>
✓ Three finite difference implementations<br>
✓ Comprehensive validation suite<br>
✓ Performance benchmarking<br>
✓ Practical trading applications</p>
</div></div>
<div class="callout callout-note no-icon callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<p><strong>Objective</strong></p>
</div>
<div class="callout-content">
<p>Bridge theoretical finance with computational methods for pricing European currency options in FX markets</p>
</div>
</div>
</div>
</section>
<section>
<section id="part-i-theory-foundations" class="title-slide slide level1 center">
<h1>Part I: Theory &amp; Foundations</h1>

</section>
<section id="motivation-market-context" class="slide level2 scrollable">
<h2>Motivation &amp; Market Context</h2>
<h3 id="why-currency-options-matter">Why Currency Options Matter</h3>
<ul>
<li class="fragment"><strong>Global Trade</strong>: $25+ trillion annual FX turnover</li>
<li class="fragment"><strong>Risk Management</strong>: Hedge exchange rate volatility</li>
<li class="fragment"><strong>Investment Strategy</strong>: Leverage directional views</li>
<li class="fragment"><strong>Corporate Finance</strong>: Manage international cash flows</li>
</ul>
<h3 id="historical-development">Historical Development</h3>
<div id="b8d6db87" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-2-output-1.png" width="1142" height="278"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mathematical-framework" class="slide level2 scrollable">
<h2>Mathematical Framework</h2>
<h3 id="foreign-exchange-market-setup">Foreign Exchange Market Setup</h3>
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Symbol</strong></th>
<th style="text-align: left;"><strong>Description</strong></th>
<th style="text-align: left;"><strong>Example Value</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(S(t)\)</span></td>
<td style="text-align: left;">Spot exchange rate</td>
<td style="text-align: left;">100</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(K\)</span></td>
<td style="text-align: left;">Strike price</td>
<td style="text-align: left;">100</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(r_d\)</span></td>
<td style="text-align: left;">Domestic interest rate</td>
<td style="text-align: left;">5%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(r_f\)</span></td>
<td style="text-align: left;">Foreign interest rate</td>
<td style="text-align: left;">3%</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><span class="math inline">\(\sigma\)</span></td>
<td style="text-align: left;">Volatility</td>
<td style="text-align: left;">20%</td>
</tr>
<tr class="even">
<td style="text-align: left;"><span class="math inline">\(T\)</span></td>
<td style="text-align: left;">Time to maturity</td>
<td style="text-align: left;">1 year</td>
</tr>
</tbody>
</table>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insight</strong></p>
</div>
<div class="callout-content">
<p>Foreign currency earns <span class="math inline">\(r_f\)</span>, analogous to a continuous dividend yield in equity options</p>
</div>
</div>
</div>
</section>
<section id="stochastic-differential-equation" class="slide level2 scrollable">
<h2>Stochastic Differential Equation</h2>
<h3 id="risk-neutral-dynamics">Risk-Neutral Dynamics</h3>
<p>Under the risk-neutral measure <span class="math inline">\(\mathbb{Q}\)</span>, the exchange rate follows:</p>
<p><span class="math display">\[
\boxed{dS_t = (r_d - r_f)S_t \, dt + \sigma S_t \, dW_t}
\]</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Components:</strong></p>
<ul>
<li><strong>Drift</strong>: <span class="math inline">\((r_d - r_f)S_t\)</span>
<ul>
<li>Interest rate differential</li>
</ul></li>
<li><strong>Volatility</strong>: <span class="math inline">\(\sigma S_t dW_t\)</span>
<ul>
<li>Random fluctuations</li>
</ul></li>
<li><strong><span class="math inline">\(W_t\)</span></strong>: Standard Brownian motion</li>
</ul>
</div><div class="column" style="width:50%;">
<div id="5c14905d" class="cell" data-fig-height="4" data-fig-width="6" data-execution_count="2">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-3-output-1.png" width="757" height="469"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="pde-derivation-hedging-approach" class="slide level2 scrollable">
<h2>PDE Derivation: Hedging Approach</h2>
<h3 id="step-1-itôs-lemma">Step 1: Itô’s Lemma</h3>
<p>For option value <span class="math inline">\(V(S,t)\)</span>:</p>
<p><span class="math display">\[
dV = \left( \frac{\partial V}{\partial t} + \frac{1}{2}\sigma^2 S^2 \frac{\partial^2 V}{\partial S^2} \right)dt + \frac{\partial V}{\partial S}dS
\]</span></p>
<h3 id="step-2-hedged-portfolio">Step 2: Hedged Portfolio</h3>
<p>Construct portfolio: <span class="math inline">\(\Pi = V - \Delta S\)</span> where <span class="math inline">\(\Delta = \frac{\partial V}{\partial S}\)</span></p>
<p><span class="math display">\[
d\Pi = dV - \Delta dS
\]</span></p>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Delta Hedging</strong></p>
</div>
<div class="callout-content">
<p>Short position in foreign currency incurs interest cost <span class="math inline">\(r_f \Delta S \, dt\)</span></p>
</div>
</div>
</div>
</section>
<section id="the-garman-kohlhagen-pde" class="slide level2 scrollable">
<h2>The Garman-Kohlhagen PDE</h2>
<h3 id="step-3-no-arbitrage-principle">Step 3: No-Arbitrage Principle</h3>
<p>Risk-free portfolio must earn domestic rate: <span class="math inline">\(d\Pi = r_d \Pi \, dt\)</span></p>
<h3 id="final-result">Final Result</h3>
<p><span class="math display">\[
\boxed{\frac{\partial V}{\partial t} + (r_d - r_f)S \frac{\partial V}{\partial S} + \frac{1}{2}\sigma^2 S^2 \frac{\partial^2 V}{\partial S^2} - r_d V = 0}
\]</span></p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Terminal Condition:</strong> <span class="math display">\[V(S,T) = \max(S-K, 0)\]</span> for call options</p>
</div><div class="column" style="width:50%;">
<p><strong>Boundary Conditions:</strong> - As <span class="math inline">\(S \to 0\)</span>: <span class="math inline">\(V \to 0\)</span> - As <span class="math inline">\(S \to \infty\)</span>: <span class="math inline">\(V \sim S e^{-r_f \tau}\)</span></p>
</div></div>
</section></section>
<section>
<section id="part-ii-analytical-solution" class="title-slide slide level1 center">
<h1>Part II: Analytical Solution</h1>

</section>
<section id="closed-form-formulas" class="slide level2 scrollable">
<h2>Closed-Form Formulas</h2>
<h3 id="garman-kohlhagen-solution">Garman-Kohlhagen Solution</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Call Option:</strong> <span class="math display">\[
C = S e^{-r_f \tau} N(d_1) - K e^{-r_d \tau} N(d_2)
\]</span></p>
<p><strong>Put Option:</strong> <span class="math display">\[
P = K e^{-r_d \tau} N(-d_2) - S e^{-r_f \tau} N(-d_1)
\]</span></p>
</div><div class="column" style="width:50%;">
<p><strong>Where:</strong> <span class="math display">\[
d_1 = \frac{\ln(S/K) + (r_d - r_f + \sigma^2/2)\tau}{\sigma\sqrt{\tau}}
\]</span></p>
<p><span class="math display">\[
d_2 = d_1 - \sigma\sqrt{\tau}
\]</span></p>
<p><span class="math inline">\(N(\cdot)\)</span> = Standard normal CDF<br>
<span class="math inline">\(\tau = T - t\)</span> = Time to maturity</p>
</div></div>
</section>
<section id="implementation-validation" class="slide level2 scrollable">
<h2>Implementation &amp; Validation</h2>
<div id="b994ce86" class="cell" data-execution_count="3">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href=""></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-2"><a href=""></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm</span>
<span id="cb1-3"><a href=""></a></span>
<span id="cb1-4"><a href=""></a><span class="kw">def</span> gk_call(S, K, rd, rf, sigma, tau):</span>
<span id="cb1-5"><a href=""></a>    <span class="co">"""Garman-Kohlhagen European call option price"""</span></span>
<span id="cb1-6"><a href=""></a>    d1 <span class="op">=</span> (np.log(S<span class="op">/</span>K) <span class="op">+</span> (rd <span class="op">-</span> rf <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>sigma<span class="op">**</span><span class="dv">2</span>)<span class="op">*</span>tau) <span class="op">/</span> (sigma<span class="op">*</span>np.sqrt(tau))</span>
<span id="cb1-7"><a href=""></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma<span class="op">*</span>np.sqrt(tau)</span>
<span id="cb1-8"><a href=""></a>    <span class="cf">return</span> S<span class="op">*</span>np.exp(<span class="op">-</span>rf<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(d1) <span class="op">-</span> K<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(d2)</span>
<span id="cb1-9"><a href=""></a></span>
<span id="cb1-10"><a href=""></a><span class="kw">def</span> gk_put(S, K, rd, rf, sigma, tau):</span>
<span id="cb1-11"><a href=""></a>    <span class="co">"""Garman-Kohlhagen European put option price"""</span></span>
<span id="cb1-12"><a href=""></a>    d1 <span class="op">=</span> (np.log(S<span class="op">/</span>K) <span class="op">+</span> (rd <span class="op">-</span> rf <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>sigma<span class="op">**</span><span class="dv">2</span>)<span class="op">*</span>tau) <span class="op">/</span> (sigma<span class="op">*</span>np.sqrt(tau))</span>
<span id="cb1-13"><a href=""></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma<span class="op">*</span>np.sqrt(tau)</span>
<span id="cb1-14"><a href=""></a>    <span class="cf">return</span> K<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(<span class="op">-</span>d2) <span class="op">-</span> S<span class="op">*</span>np.exp(<span class="op">-</span>rf<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(<span class="op">-</span>d1)</span>
<span id="cb1-15"><a href=""></a></span>
<span id="cb1-16"><a href=""></a><span class="co"># Benchmark calculation</span></span>
<span id="cb1-17"><a href=""></a>S, K, rd, rf, sigma, tau <span class="op">=</span> <span class="dv">100</span>, <span class="dv">100</span>, <span class="fl">0.05</span>, <span class="fl">0.03</span>, <span class="fl">0.20</span>, <span class="fl">1.0</span></span>
<span id="cb1-18"><a href=""></a>call_price <span class="op">=</span> gk_call(S, K, rd, rf, sigma, tau)</span>
<span id="cb1-19"><a href=""></a>put_price <span class="op">=</span> gk_put(S, K, rd, rf, sigma, tau)</span>
<span id="cb1-20"><a href=""></a></span>
<span id="cb1-21"><a href=""></a><span class="bu">print</span>(<span class="ss">f"Call Option Price: $</span><span class="sc">{</span>call_price<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb1-22"><a href=""></a><span class="bu">print</span>(<span class="ss">f"Put Option Price:  $</span><span class="sc">{</span>put_price<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb1-23"><a href=""></a><span class="bu">print</span>(<span class="ss">f"Put-Call Parity Check: </span><span class="sc">{</span>np<span class="sc">.</span><span class="bu">abs</span>(call_price <span class="op">-</span> put_price <span class="op">-</span> (S<span class="op">*</span>np.exp(<span class="op">-</span>rf<span class="op">*</span>tau) <span class="op">-</span> K<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau))) <span class="op">&lt;</span> <span class="fl">1e-10</span><span class="sc">}</span><span class="ss">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Call Option Price: $8.6525
Put Option Price:  $6.7309
Put-Call Parity Check: True</code></pre>
</div>
</div>
</section>
<section id="option-price-behavior" class="slide level2 scrollable">
<h2>Option Price Behavior</h2>
<div id="898e701a" class="cell" data-fig-height="6" data-fig-width="14" data-execution_count="4">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-5-output-1.png" width="1335" height="566"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Time value decreases as maturity approaches. Options converge to intrinsic value at expiry.</p>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Option Price Behavior</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Color gradient shows time value</strong>: Darker curves (longer τ) are further above intrinsic value (gray shaded area) → more time = more optionality</li>
<li><strong>All curves converge to payoff</strong>: As τ → 0 (red curve), option price approaches max(S-K, 0) for calls or max(K-S, 0) for puts → time value disappears</li>
<li><strong>Strike price (K=100) is the pivot</strong>: Left of strike = out-of-the-money, right of strike = in-the-money for calls (opposite for puts)</li>
<li><strong>Deep ITM behavior</strong>: Far right, curves become nearly parallel to intrinsic value → mostly intrinsic, minimal time value</li>
<li><strong>Deep OTM behavior</strong>: Far left, curves flatten near zero → low probability of finishing in-the-money, small time value</li>
<li><strong>Maximum time value at ATM</strong>: Near strike (S ≈ K), gap between curves and intrinsic value is largest → highest uncertainty = highest optionality</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-iii-the-greeks" class="title-slide slide level1 center">
<h1>Part III: The Greeks</h1>

</section>
<section id="option-greeks-risk-sensitivities" class="slide level2 scrollable">
<h2>Option Greeks: Risk Sensitivities</h2>
<h3 id="analytical-formulas">Analytical Formulas</h3>
<div style="font-size: 0.85em;">
<table class="caption-top">
<colgroup>
<col style="width: 21%">
<col style="width: 28%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Greek</th>
<th style="text-align: left;">Formula</th>
<th style="text-align: left;">Interpretation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Delta (Δ)</strong></td>
<td style="text-align: left;"><span class="math inline">\(\frac{\partial V}{\partial S} = e^{-r_f\tau} N(d_1)\)</span></td>
<td style="text-align: left;">Spot price sensitivity</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Gamma (Γ)</strong></td>
<td style="text-align: left;"><span class="math inline">\(\frac{\partial^2 V}{\partial S^2} = \frac{e^{-r_f\tau} n(d_1)}{S\sigma\sqrt{\tau}}\)</span></td>
<td style="text-align: left;">Delta sensitivity</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Vega (ν)</strong></td>
<td style="text-align: left;"><span class="math inline">\(\frac{\partial V}{\partial \sigma} = S e^{-r_f\tau} n(d_1) \sqrt{\tau}\)</span></td>
<td style="text-align: left;">Volatility sensitivity</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Theta (Θ)</strong></td>
<td style="text-align: left;"><span class="math inline">\(\frac{\partial V}{\partial t} = -\frac{S e^{-r_f\tau} n(d_1) \sigma}{2\sqrt{\tau}} + \cdots\)</span></td>
<td style="text-align: left;">Time decay</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Rho (ρ)</strong></td>
<td style="text-align: left;"><span class="math inline">\(\frac{\partial V}{\partial r_d} = K \tau e^{-r_d\tau} N(d_2)\)</span></td>
<td style="text-align: left;">Interest rate sensitivity</td>
</tr>
</tbody>
</table>
</div>
<div id="7544c32c" class="cell" data-execution_count="5">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href=""></a><span class="kw">def</span> greeks_call(S, K, rd, rf, sigma, tau):</span>
<span id="cb3-2"><a href=""></a>    <span class="co">"""Calculate all Greeks for call option"""</span></span>
<span id="cb3-3"><a href=""></a>    d1 <span class="op">=</span> (np.log(S<span class="op">/</span>K) <span class="op">+</span> (rd <span class="op">-</span> rf <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>sigma<span class="op">**</span><span class="dv">2</span>)<span class="op">*</span>tau) <span class="op">/</span> (sigma<span class="op">*</span>np.sqrt(tau))</span>
<span id="cb3-4"><a href=""></a>    d2 <span class="op">=</span> d1 <span class="op">-</span> sigma<span class="op">*</span>np.sqrt(tau)</span>
<span id="cb3-5"><a href=""></a>    </span>
<span id="cb3-6"><a href=""></a>    delta <span class="op">=</span> np.exp(<span class="op">-</span>rf<span class="op">*</span>tau) <span class="op">*</span> norm.cdf(d1)</span>
<span id="cb3-7"><a href=""></a>    gamma <span class="op">=</span> np.exp(<span class="op">-</span>rf<span class="op">*</span>tau) <span class="op">*</span> norm.pdf(d1) <span class="op">/</span> (S<span class="op">*</span>sigma<span class="op">*</span>np.sqrt(tau))</span>
<span id="cb3-8"><a href=""></a>    vega <span class="op">=</span> S <span class="op">*</span> np.exp(<span class="op">-</span>rf<span class="op">*</span>tau) <span class="op">*</span> norm.pdf(d1) <span class="op">*</span> np.sqrt(tau)</span>
<span id="cb3-9"><a href=""></a>    theta <span class="op">=</span> <span class="op">-</span>(S<span class="op">*</span>np.exp(<span class="op">-</span>rf<span class="op">*</span>tau)<span class="op">*</span>norm.pdf(d1)<span class="op">*</span>sigma)<span class="op">/</span>(<span class="dv">2</span><span class="op">*</span>np.sqrt(tau)) <span class="op">+</span> <span class="op">\</span></span>
<span id="cb3-10"><a href=""></a>            rf<span class="op">*</span>S<span class="op">*</span>np.exp(<span class="op">-</span>rf<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(d1) <span class="op">-</span> rd<span class="op">*</span>K<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(d2)</span>
<span id="cb3-11"><a href=""></a>    rho <span class="op">=</span> K<span class="op">*</span>tau<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau)<span class="op">*</span>norm.cdf(d2)</span>
<span id="cb3-12"><a href=""></a>    </span>
<span id="cb3-13"><a href=""></a>    <span class="cf">return</span> {<span class="st">'Delta'</span>: delta, <span class="st">'Gamma'</span>: gamma, <span class="st">'Vega'</span>: vega, <span class="st">'Theta'</span>: theta, <span class="st">'Rho'</span>: rho}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</section>
<section id="greeks-visualization" class="slide level2 scrollable">
<h2>Greeks Visualization</h2>
<div id="eb9cb75d" class="cell" data-fig-height="10" data-fig-width="14" data-execution_count="6">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-7-output-1.png" width="1429" height="949"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Understanding the Greeks</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Delta peaks at ATM</strong>: At-the-money options (S ≈ K) have Delta around 0.5, meaning 50% probability of finishing in-the-money</li>
<li><strong>Gamma is highest at ATM</strong>: Maximum curvature at strike means Delta changes most rapidly here → frequent rebalancing needed for hedges</li>
<li><strong>Vega follows Gamma</strong>: ATM options are most sensitive to volatility changes → highest exposure to implied volatility risk</li>
<li><strong>Theta is most negative at ATM</strong>: Time decay is fastest where time value is highest → selling ATM options captures maximum theta</li>
<li><strong>All Greeks converge to zero</strong> deep in/out of the money → extreme options have minimal sensitivity to market changes</li>
</ul>
</div>
</div>
</div>
</section>
<section id="delta-hedging-application" class="slide level2 scrollable">
<h2>Delta Hedging Application</h2>
<h3 id="practical-risk-management">Practical Risk Management</h3>
<div id="f03c050c" class="cell" data-execution_count="7">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-8-output-1.png" width="1334" height="566"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
Delta-hedging reduces risk by 87%. Residual risk from gamma/vega.</code></pre>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Result</strong></p>
</div>
<div class="callout-content">
<p>Delta-hedging reduces P&amp;L volatility by ~87%. Residual risk from gamma/vega effects.</p>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Delta Hedging in Practice</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>87% risk reduction</strong>: Unhedged P&amp;L swings wildly with spot moves, but delta-hedged position stays nearly flat</li>
<li><strong>Left plot shows effectiveness</strong>: Red (unhedged) has large swings, green (hedged) stays close to zero → hedging works!</li>
<li><strong>Residual 13% risk comes from</strong>: Gamma (Delta changes between rebalances), Vega (volatility shifts), and discrete rebalancing</li>
<li><strong>Real-world application</strong>: Market makers use this to provide liquidity without taking directional bets on currency moves</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-iv-numerical-methods" class="title-slide slide level1 center">
<h1>Part IV: Numerical Methods</h1>

</section>
<section id="finite-difference-discretization" class="slide level2 scrollable">
<h2>Finite Difference Discretization</h2>
<h3 id="problem-setup">Problem Setup</h3>
<p><strong>Spatial Domain</strong>: <span class="math inline">\(S \in [S_{min}, S_{max}]\)</span> with <span class="math inline">\(M\)</span> points<br>
<strong>Temporal Domain</strong>: <span class="math inline">\(t \in [0, T]\)</span> with <span class="math inline">\(N\)</span> points</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Grid Notation:</strong></p>
<ul>
<li><span class="math inline">\(S_i = S_{min} + i \cdot \Delta S\)</span></li>
<li><span class="math inline">\(t_n = n \cdot \Delta t\)</span></li>
<li><span class="math inline">\(V_i^n \approx V(S_i, t_n)\)</span></li>
</ul>
<p><strong>Boundary Conditions:</strong></p>
<ul>
<li><span class="math inline">\(V_0^n = 0\)</span> (S → 0)</li>
<li><span class="math inline">\(V_M^n = S_M - K e^{-r_d(T-t_n)}\)</span> (S → ∞)</li>
</ul>
</div><div class="column" style="width:50%;">
<div id="5f7316fa" class="cell" data-fig-height="5" data-fig-width="6" data-execution_count="8">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-9-output-1.png" width="661" height="469"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="three-numerical-schemes" class="slide level2 scrollable">
<h2>Three Numerical Schemes</h2>
<h3 id="forward-time-central-space-ftcs">1. Forward-Time Central-Space (FTCS)</h3>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Conditionally Stable</strong></p>
</div>
<div class="callout-content">
<p>Stability requires: <span class="math inline">\(\Delta t \leq \frac{\Delta S^2}{\sigma^2 S_{max}^2}\)</span> (CFL condition)</p>
</div>
</div>
</div>
<p><span class="math display">\[
V_i^{n+1} = V_i^n + \Delta t \left[ (r_d - r_f)S_i \frac{V_{i+1}^n - V_{i-1}^n}{2\Delta S} + \frac{1}{2}\sigma^2 S_i^2 \frac{V_{i+1}^n - 2V_i^n + V_{i-1}^n}{\Delta S^2} - r_d V_i^n \right]
\]</span></p>
<ul>
<li><strong>Explicit</strong>: Directly computes next time step</li>
<li><strong>Fast</strong>: No matrix inversion</li>
<li><strong>Risk</strong>: Can become unstable</li>
</ul>
</section>
<section id="three-numerical-schemes-cont." class="slide level2 scrollable">
<h2>Three Numerical Schemes (cont.)</h2>
<h3 id="backward-time-central-space-btcs">2. Backward-Time Central-Space (BTCS)</h3>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Unconditionally Stable</strong></p>
</div>
<div class="callout-content">
<p>No stability restriction on time step size</p>
</div>
</div>
</div>
<p><span class="math display">\[
V_i^{n+1} = V_i^n + \Delta t \left[ (r_d - r_f)S_i \frac{V_{i+1}^{n+1} - V_{i-1}^{n+1}}{2\Delta S} + \frac{1}{2}\sigma^2 S_i^2 \frac{V_{i+1}^{n+1} - 2V_i^{n+1} + V_{i-1}^{n+1}}{\Delta S^2} - r_d V_i^{n+1} \right]
\]</span></p>
<ul>
<li><strong>Implicit</strong>: Solve tridiagonal system</li>
<li><strong>Stable</strong>: Large time steps allowed</li>
<li><strong>Cost</strong>: Matrix solve at each step</li>
</ul>
</section>
<section id="three-numerical-schemes-cont.-1" class="slide level2 scrollable">
<h2>Three Numerical Schemes (cont.)</h2>
<h3 id="crank-nicolson-cn">3. Crank-Nicolson (CN)</h3>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Best of Both Worlds</strong></p>
</div>
<div class="callout-content">
<p>Unconditionally stable + Second-order time accuracy</p>
</div>
</div>
</div>
<p><span class="math display">\[
\frac{V_i^{n+1} - V_i^n}{\Delta t} = \frac{1}{2}\left[ \mathcal{L}V^{n+1} + \mathcal{L}V^n \right]
\]</span></p>
<p>where <span class="math inline">\(\mathcal{L}\)</span> is the spatial operator.</p>
<ul>
<li><strong>Accuracy</strong>: <span class="math inline">\(O(\Delta t^2, \Delta S^2)\)</span></li>
<li><strong>Stability</strong>: Unconditional</li>
<li><strong>Optimal</strong>: Production standard</li>
</ul>
</section>
<section id="implementation-example" class="slide level2 scrollable">
<h2>Implementation Example</h2>
<div id="38af6752" class="cell" data-execution_count="9">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href=""></a><span class="kw">def</span> crank_nicolson(S_min, S_max, M, T, N, K, rd, rf, sigma, option_type<span class="op">=</span><span class="st">'call'</span>):</span>
<span id="cb5-2"><a href=""></a>    <span class="co">"""Crank-Nicolson scheme for Garman-Kohlhagen PDE"""</span></span>
<span id="cb5-3"><a href=""></a>    dS <span class="op">=</span> (S_max <span class="op">-</span> S_min) <span class="op">/</span> M</span>
<span id="cb5-4"><a href=""></a>    dt <span class="op">=</span> T <span class="op">/</span> N</span>
<span id="cb5-5"><a href=""></a>    S <span class="op">=</span> np.linspace(S_min, S_max, M<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb5-6"><a href=""></a>    V <span class="op">=</span> np.maximum(S <span class="op">-</span> K, <span class="dv">0</span>) <span class="cf">if</span> option_type <span class="op">==</span> <span class="st">'call'</span> <span class="cf">else</span> np.maximum(K <span class="op">-</span> S, <span class="dv">0</span>)</span>
<span id="cb5-7"><a href=""></a>    </span>
<span id="cb5-8"><a href=""></a>    <span class="co"># Construct tridiagonal matrix</span></span>
<span id="cb5-9"><a href=""></a>    alpha <span class="op">=</span> np.zeros(M<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb5-10"><a href=""></a>    beta <span class="op">=</span> np.zeros(M<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb5-11"><a href=""></a>    gamma <span class="op">=</span> np.zeros(M<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb5-12"><a href=""></a>    </span>
<span id="cb5-13"><a href=""></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, M):</span>
<span id="cb5-14"><a href=""></a>        alpha[i] <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span><span class="op">*</span>dt<span class="op">*</span>(sigma<span class="op">**</span><span class="dv">2</span><span class="op">*</span>S[i]<span class="op">**</span><span class="dv">2</span><span class="op">/</span>dS<span class="op">**</span><span class="dv">2</span> <span class="op">-</span> (rd<span class="op">-</span>rf)<span class="op">*</span>S[i]<span class="op">/</span>dS)</span>
<span id="cb5-15"><a href=""></a>        beta[i] <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="fl">0.5</span><span class="op">*</span>dt<span class="op">*</span>(sigma<span class="op">**</span><span class="dv">2</span><span class="op">*</span>S[i]<span class="op">**</span><span class="dv">2</span><span class="op">/</span>dS<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> rd)</span>
<span id="cb5-16"><a href=""></a>        gamma[i] <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span><span class="op">*</span>dt<span class="op">*</span>(sigma<span class="op">**</span><span class="dv">2</span><span class="op">*</span>S[i]<span class="op">**</span><span class="dv">2</span><span class="op">/</span>dS<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> (rd<span class="op">-</span>rf)<span class="op">*</span>S[i]<span class="op">/</span>dS)</span>
<span id="cb5-17"><a href=""></a>    </span>
<span id="cb5-18"><a href=""></a>    <span class="co"># Time-stepping (backward from T to 0)</span></span>
<span id="cb5-19"><a href=""></a>    <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(N):</span>
<span id="cb5-20"><a href=""></a>        tau <span class="op">=</span> (n<span class="op">+</span><span class="dv">1</span>)<span class="op">*</span>dt</span>
<span id="cb5-21"><a href=""></a>        b <span class="op">=</span> V.copy()</span>
<span id="cb5-22"><a href=""></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, M):</span>
<span id="cb5-23"><a href=""></a>            b[i] <span class="op">=</span> <span class="op">-</span>alpha[i]<span class="op">*</span>V[i<span class="op">-</span><span class="dv">1</span>] <span class="op">+</span> (<span class="dv">2</span><span class="op">-</span>beta[i])<span class="op">*</span>V[i] <span class="op">-</span> gamma[i]<span class="op">*</span>V[i<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb5-24"><a href=""></a>        </span>
<span id="cb5-25"><a href=""></a>        <span class="co"># Boundary conditions</span></span>
<span id="cb5-26"><a href=""></a>        b[<span class="dv">0</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb5-27"><a href=""></a>        b[M] <span class="op">=</span> S_max <span class="op">-</span> K<span class="op">*</span>np.exp(<span class="op">-</span>rd<span class="op">*</span>tau) <span class="cf">if</span> option_type <span class="op">==</span> <span class="st">'call'</span> <span class="cf">else</span> <span class="dv">0</span></span>
<span id="cb5-28"><a href=""></a>        </span>
<span id="cb5-29"><a href=""></a>        </span>
<span id="cb5-30"><a href=""></a>        <span class="co"># Thomas algorithm (tridiagonal solver)</span></span>
<span id="cb5-31"><a href=""></a>        V <span class="op">=</span> thomas_algorithm(alpha, beta<span class="op">+</span><span class="dv">1</span>, gamma, b)</span>
<span id="cb5-32"><a href=""></a>    </span>
<span id="cb5-33"><a href=""></a>    <span class="cf">return</span> S, V</span>
<span id="cb5-34"><a href=""></a></span>
<span id="cb5-35"><a href=""></a><span class="kw">def</span> thomas_algorithm(a, b, c, d):</span>
<span id="cb5-36"><a href=""></a>    <span class="co">"""Solve tridiagonal system Ax=d"""</span></span>
<span id="cb5-37"><a href=""></a>    n <span class="op">=</span> <span class="bu">len</span>(d)</span>
<span id="cb5-38"><a href=""></a>    c_prime <span class="op">=</span> np.zeros(n<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb5-39"><a href=""></a>    d_prime <span class="op">=</span> np.zeros(n)</span>
<span id="cb5-40"><a href=""></a>    x <span class="op">=</span> np.zeros(n)</span>
<span id="cb5-41"><a href=""></a>    </span>
<span id="cb5-42"><a href=""></a>    c_prime[<span class="dv">0</span>] <span class="op">=</span> c[<span class="dv">0</span>] <span class="op">/</span> b[<span class="dv">0</span>]</span>
<span id="cb5-43"><a href=""></a>    d_prime[<span class="dv">0</span>] <span class="op">=</span> d[<span class="dv">0</span>] <span class="op">/</span> b[<span class="dv">0</span>]</span>
<span id="cb5-44"><a href=""></a>    </span>
<span id="cb5-45"><a href=""></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n<span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb5-46"><a href=""></a>        c_prime[i] <span class="op">=</span> c[i] <span class="op">/</span> (b[i] <span class="op">-</span> a[i]<span class="op">*</span>c_prime[i<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb5-47"><a href=""></a>    </span>
<span id="cb5-48"><a href=""></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, n):</span>
<span id="cb5-49"><a href=""></a>        d_prime[i] <span class="op">=</span> (d[i] <span class="op">-</span> a[i]<span class="op">*</span>d_prime[i<span class="op">-</span><span class="dv">1</span>]) <span class="op">/</span> (b[i] <span class="op">-</span> a[i]<span class="op">*</span>c_prime[i<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb5-50"><a href=""></a>    </span>
<span id="cb5-51"><a href=""></a>    x[<span class="op">-</span><span class="dv">1</span>] <span class="op">=</span> d_prime[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb5-52"><a href=""></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n<span class="op">-</span><span class="dv">2</span>, <span class="op">-</span><span class="dv">1</span>, <span class="op">-</span><span class="dv">1</span>):</span>
<span id="cb5-53"><a href=""></a>        x[i] <span class="op">=</span> d_prime[i] <span class="op">-</span> c_prime[i]<span class="op">*</span>x[i<span class="op">+</span><span class="dv">1</span>]</span>
<span id="cb5-54"><a href=""></a>    </span>
<span id="cb5-55"><a href=""></a>    <span class="cf">return</span> x</span>
<span id="cb5-56"><a href=""></a></span>
<span id="cb5-57"><a href=""></a><span class="co"># Demonstrate</span></span>
<span id="cb5-58"><a href=""></a><span class="co"># S_num, V_num = crank_nicolson(50, 150, 100, 1.0, 200, K, rd, rf, sigma)</span></span>
<span id="cb5-59"><a href=""></a><span class="co"># print(f"Numerical Call Price at S=100: ${np.interp(100, S_num, V_num):.4f}")</span></span>
<span id="cb5-60"><a href=""></a><span class="bu">print</span>(<span class="ss">f"Analytical Call Price at S=100: $</span><span class="sc">{</span>gk_call(<span class="dv">100</span>, K, rd, rf, sigma, <span class="fl">1.0</span>)<span class="sc">:.4f}</span><span class="ss">"</span>)</span>
<span id="cb5-61"><a href=""></a><span class="co"># print(f"Relative Error: {abs(np.interp(100, S_num, V_num) - gk_call(100, K, rd, rf, sigma, 1.0))/gk_call(100, K, rd, rf, sigma, 1.0)*100:.4f}%")</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Analytical Call Price at S=100: $8.6525</code></pre>
</div>
</div>
</section></section>
<section>
<section id="part-v-stability-analysis" class="title-slide slide level1 center">
<h1>Part V: Stability Analysis</h1>

</section>
<section id="von-neumann-stability-analysis" class="slide level2 scrollable">
<h2>Von Neumann Stability Analysis</h2>
<h3 id="methodology">Methodology</h3>
<p>Test stability using Fourier mode: <span class="math inline">\(V_i^n = \xi^n e^{ik i\Delta S}\)</span></p>
<p><strong>Amplification Factor</strong> <span class="math inline">\(\xi\)</span> determines stability:</p>
<ul>
<li><span class="math inline">\(|\xi| \leq 1\)</span>: Stable (errors don’t grow)</li>
<li><span class="math inline">\(|\xi| &gt; 1\)</span>: Unstable (errors explode)</li>
</ul>
<h3 id="results-summary">Results Summary</h3>
<div style="font-size: 0.9em;">
<table class="caption-top">
<colgroup>
<col style="width: 10%">
<col style="width: 29%">
<col style="width: 28%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Scheme</th>
<th style="text-align: left;">Amplification Factor</th>
<th style="text-align: left;">Stability Condition</th>
<th style="text-align: left;">Practical Implication</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>FTCS</strong></td>
<td style="text-align: left;"><span class="math inline">\(\xi = 1 - \lambda + \lambda\cos(k\Delta S)\)</span></td>
<td style="text-align: left;"><span class="math inline">\(\lambda \leq 0.5\)</span></td>
<td style="text-align: left;">Requires small <span class="math inline">\(\Delta t\)</span></td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>BTCS</strong></td>
<td style="text-align: left;"><span class="math inline">\(\xi = \frac{1}{1 + \lambda - \lambda\cos(k\Delta S)}\)</span></td>
<td style="text-align: left;">Always <span class="math inline">\(\|\xi\| \leq 1\)</span></td>
<td style="text-align: left;">Any <span class="math inline">\(\Delta t\)</span> works</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>CN</strong></td>
<td style="text-align: left;"><span class="math inline">\(\xi = \frac{1 - \lambda/2 + (\lambda/2)\cos(k\Delta S)}{1 + \lambda/2 - (\lambda/2)\cos(k\Delta S)}\)</span></td>
<td style="text-align: left;">Always <span class="math inline">\(\|\xi\| \leq 1\)</span></td>
<td style="text-align: left;">Any <span class="math inline">\(\Delta t\)</span> works</td>
</tr>
</tbody>
</table>
</div>
<p>where <span class="math inline">\(\lambda = \frac{\sigma^2 S_{max}^2 \Delta t}{\Delta S^2}\)</span></p>
</section>
<section id="stability-demonstration" class="slide level2 scrollable">
<h2>Stability Demonstration</h2>
<div id="f0c801d5" class="cell" data-fig-height="6" data-fig-width="14" data-execution_count="10">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-11-output-1.png" width="1335" height="564"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>FTCS requires <span class="math inline">\(\Delta t &lt; 10^{-4}\)</span> for stability with this grid. BTCS/CN have no such restriction.</p>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Stability in Action</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Left plot</strong>: All 2 methods (Analytical, FTCS, CN) overlap perfectly when stable → numerical methods work when conditions are right</li>
<li><strong>Right plot (CFL diagram)</strong>: Green zone = safe for FTCS, red zone = unstable and will explode</li>
<li><strong>Critical lesson</strong>: FTCS needs tiny time steps (Δt &lt; 10⁻⁴) → requires 1000+ steps, very expensive!</li>
<li><strong>Why this matters</strong>: In production, you want methods that “just work” without worrying about stability crashes</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-vi-convergence-analysis" class="title-slide slide level1 center">
<h1>Part VI: Convergence Analysis</h1>

</section>
<section id="theoretical-convergence-rates" class="slide level2 scrollable">
<h2>Theoretical Convergence Rates</h2>
<h3 id="truncation-error-analysis">Truncation Error Analysis</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>FTCS:</strong></p>
<ul>
<li>Time: <span class="math inline">\(O(\Delta t)\)</span></li>
<li>Space: <span class="math inline">\(O(\Delta S^2)\)</span></li>
<li>Overall: First-order in time</li>
</ul>
<p><strong>BTCS:</strong></p>
<ul>
<li>Time: <span class="math inline">\(O(\Delta t)\)</span></li>
<li>Space: <span class="math inline">\(O(\Delta S^2)\)</span></li>
<li>Overall: First-order in time</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Crank-Nicolson:</strong></p>
<ul>
<li>Time: <span class="math inline">\(O(\Delta t^2)\)</span></li>
<li>Space: <span class="math inline">\(O(\Delta S^2)\)</span></li>
<li>Overall: <strong>Second-order in time</strong></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Advantage</strong></p>
</div>
<div class="callout-content">
<p>CN achieves same accuracy with <strong>4x larger</strong> time steps</p>
</div>
</div>
</div>
</div></div>
<h3 id="error-metrics">Error Metrics</h3>
<ul>
<li><strong>L∞ Error</strong>: <span class="math inline">\(\|E\|_\infty = \max_i |V_i^{exact} - V_i^{numerical}|\)</span></li>
<li><strong>L² Error</strong>: <span class="math inline">\(\|E\|_2 = \sqrt{\frac{1}{M}\sum_i (V_i^{exact} - V_i^{numerical})^2}\)</span></li>
<li><strong>Relative Error</strong>: <span class="math inline">\(\frac{\|E\|}{\|V^{exact}\|}\)</span></li>
</ul>
</section>
<section id="convergence-study-results" class="slide level2 scrollable">
<h2>Convergence Study Results</h2>
<div id="15839f37" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stdout">
<pre><code>Convergence Studies:

FTCS:
  M    N        dS       dt     Error
 20   36 19.999500 0.027778 11.821787
 40  143  9.999750 0.006993 11.821787
 80  569  4.999875 0.001757 11.821787
160 2276  2.499938 0.000439 11.821787

BTCS:
  M   N        dS      dt     Error
 20  20 19.999500 0.05000 11.821787
 40  40  9.999750 0.02500 11.821787
 80  80  4.999875 0.01250 11.821787
160 160  2.499938 0.00625 11.821787

CN:
  M   N        dS      dt    Error
 20  20 19.999500 0.05000 1.180862
 40  40  9.999750 0.02500 0.249385
 80  80  4.999875 0.01250 0.059586
160 160  2.499938 0.00625 0.014733</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-12-output-2.png" width="1333" height="564"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Finding</strong></p>
</div>
<div class="callout-content">
<p>CN achieves <strong>second-order convergence</strong> (slope = 2), confirming <span class="math inline">\(O(\Delta t^2)\)</span> accuracy. BTCS shows <strong>first-order</strong> (slope = 1).</p>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Convergence Study Results</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Left plot (log-log)</strong>: Straight lines on log-log plot confirm theoretical predictions → CN slope = 2 (steeper), BTCS slope = 1</li>
<li><strong>Steeper is better</strong>: CN error drops 4× when halving Δt, while BTCS only drops 2× → CN reaches target accuracy faster</li>
<li><strong>Right plot (EOA bars)</strong>: Empirical Order of Accuracy measures actual convergence → CN bars near 2, BTCS bars near 1 ✓</li>
<li><strong>Practical implication</strong>: To get 0.01% error, CN needs ~100 steps but BTCS needs ~400 steps → CN is 4× more efficient</li>
<li><strong>Theory matches practice</strong>: Measured convergence rates match mathematical predictions → validates our implementation</li>
</ul>
</div>
</div>
</div>
</section>
<section id="accuracy-vs-computational-cost" class="slide level2 scrollable">
<h2>Accuracy vs Computational Cost</h2>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Winner: Crank-Nicolson</strong></p>
</div>
<div class="callout-content">
<p>For same accuracy, CN requires <strong>50-75% fewer time steps</strong> than BTCS, translating to significant computational savings.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-vii-results-visualization" class="title-slide slide level1 center">
<h1>Part VII: Results &amp; Visualization</h1>

</section>
<section id="d-option-price-surface" class="slide level2 scrollable">
<h2>3D Option Price Surface</h2>
<div id="dbaef862" class="cell" data-fig-height="7" data-fig-width="14" data-execution_count="12">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-13-output-1.png" width="1323" height="661"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Surface shows smooth, well-behaved option values. Maximum at high S and long τ, converging to intrinsic value as τ → 0.</p>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Reading the Price Surface</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>3D surface (left)</strong>: Shows how option value depends on BOTH spot price and time → higher spot + more time = higher value</li>
<li><strong>Contour plot (right)</strong>: Lines connect equal option prices → bunched near strike (K=100) means rapid price changes there</li>
<li><strong>Red dashed line</strong>: Strike price separates in-the-money (right) from out-of-the-money (left) regions</li>
<li><strong>Time decay visible</strong>: As τ → 0 (bottom of plots), surface flattens to payoff max(S-K, 0) → time value disappears</li>
<li><strong>Smooth surface = correct implementation</strong>: No kinks or jumps means our analytical solution is well-behaved and trustworthy</li>
</ul>
</div>
</div>
</div>
</section>
<section id="time-evolution-of-option-prices" class="slide level2 scrollable">
<h2>Time Evolution of Option Prices</h2>
<div id="43d113e3" class="cell" data-fig-height="6" data-fig-width="14" data-execution_count="13">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-14-output-1.png" width="1335" height="566"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Time Decay (Theta)</strong></p>
</div>
<div class="callout-content">
<p>Time value is maximized near ATM (S ≈ K) and diminishes as maturity approaches. Deep ITM/OTM options have minimal time value.</p>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Time Evolution of Option Prices</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Left plot</strong>: All curves converge to the black dashed line (intrinsic value) as τ → 0 → options become payoff at expiry</li>
<li><strong>Color gradient</strong>: Darker = longer time to expiry → more time value → curves further above intrinsic value</li>
<li><strong>Right plot (time value)</strong>: Shows pure optionality (price - intrinsic) → peaks at ATM where uncertainty is highest</li>
<li><strong>Time value decay</strong>: Notice how time value shrinks from ~$10 (τ=1yr) to nearly $0 (τ=0.01yr) → theta in action!</li>
<li><strong>Deep ITM/OTM behavior</strong>: Far from strike, all curves nearly flat → mostly intrinsic value, little time value to lose</li>
</ul>
</div>
</div>
</div>
</section>
<section id="numerical-vs-analytical-comparison" class="slide level2 scrollable">
<h2>Numerical vs Analytical Comparison</h2>
<div id="624930e9" class="cell" data-execution_count="14">
<div class="cell-output cell-output-stdout">
<pre><code>Price at S=100: CN=8.643050, Exact=8.652529
Relative Error: 0.1095%
CN: 0.029s (N=100)
Price at S=100: CN=8.643050, Exact=8.652529, Error=9.48e-03</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-15-output-2.png" width="1718" height="470"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Accuracy Achievement</strong></p>
</div>
<div class="callout-content">
<p>Maximum relative error &lt; 0.1% across entire domain. Excellent agreement validates implementation.</p>
</div>
</div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Numerical vs Analytical Comparison</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Left plot</strong>: Black (analytical) and red dashed (numerical) lines are virtually identical → CN works extremely well!</li>
<li><strong>Red dots</strong>: Actual grid points where we computed values → smooth interpolation between them</li>
<li><strong>Right plot (errors)</strong>: Blue = absolute error, Red = relative error (%) → both extremely small</li>
<li><strong>Error statistics</strong>: Max relative error &lt; 0.1% means if true price is $10, our error is &lt; $0.01 → trading-grade accuracy</li>
<li><strong>Where errors peak</strong>: Slightly higher near ATM (around strike) where Greeks are largest → but still negligible</li>
<li><strong>Validation success</strong>: Numerical method reproduces analytical solution to machine precision → implementation is correct ✓</li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-viii-performance-recommendations" class="title-slide slide level1 center">
<h1>Part VIII: Performance &amp; Recommendations</h1>

</section>
<section id="method-comparison-summary" class="slide level2 scrollable">
<h2>Method Comparison Summary</h2>
<div id="3e9a4c76" class="cell" data-execution_count="15">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-16-output-1.png" width="1334" height="375"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insights: Method Comparison Summary</strong></p>
</div>
<div class="callout-content">
<ul>
<li><strong>Stability column</strong>: Only FTCS has “Conditional” → dangerous! BTCS/CN are “Unconditional” → safe for any time step</li>
<li><strong>Time Order column</strong>: CN has O(Δt²) vs O(Δt) for others → this is the game-changer for efficiency</li>
<li><strong>Best Use column</strong>: Green highlight on CN “PRODUCTION (BEST)” → this is the industry standard for good reason</li>
<li><strong>Why CN wins</strong>: Combines unconditional stability (like BTCS) + second-order accuracy (better than both) → best of both worlds</li>
<li><strong>Memory/Complexity</strong>: All three have same O(M) memory and O(MN) complexity → CN doesn’t cost more, just works better!</li>
<li><strong>Bottom line</strong>: For real trading systems, always choose Crank-Nicolson unless you have a very specific reason not to</li>
</ul>
</div>
</div>
</div>
</section>
<section id="practical-recommendations" class="slide level2 scrollable">
<h2>Practical Recommendations</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="production-systems">Production Systems</h3>
<p>✓ <strong>Use Crank-Nicolson</strong></p>
<ul>
<li>Second-order temporal accuracy</li>
<li>Unconditionally stable</li>
<li>Best accuracy-to-cost ratio</li>
<li>Industry standard</li>
</ul>
<h3 id="implementation-tips">Implementation Tips</h3>
<ol type="1">
<li>Start with M=100, N=200</li>
<li>Refine until error &lt; tolerance</li>
<li>Monitor Greeks accuracy</li>
<li>Validate against analytical</li>
</ol>
</div><div class="column" style="width:50%;">
<h3 id="quick-prototyping">Quick Prototyping</h3>
<p><strong>FTCS acceptable</strong> if:</p>
<ul>
<li>Testing algorithm logic</li>
<li>Coarse resolution sufficient</li>
<li>Carefully monitor stability</li>
</ul>
<h3 id="robustness-priority">Robustness Priority</h3>
<p><strong>BTCS recommended</strong> if:</p>
<ul>
<li>Guaranteed stability critical</li>
<li>Simple implementation preferred</li>
<li>Slight accuracy loss acceptable</li>
</ul>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Never use FTCS in production - stability risk too high</p>
</div>
</div>
</div>
</div></div>
</section>
<section id="computational-performance" class="slide level2 scrollable">
<h2>Computational Performance</h2>
<div id="a53034ba" class="cell" data-fig-height="6" data-fig-width="14" data-execution_count="16">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-17-output-1.png" width="1334" height="564"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Key Insight</strong></p>
</div>
<div class="callout-content">
<p>CN achieves <strong>lowest error</strong> for given runtime due to <span class="math inline">\(O(\Delta t^2)\)</span> convergence. Optimal choice for production systems.</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="part-ix-conclusions" class="title-slide slide level1 center">
<h1>Part IX: Conclusions</h1>

</section>
<section id="summary-of-achievements" class="slide level2 scrollable">
<h2>Summary of Achievements</h2>
<h3 id="completed-objectives">✓ Completed Objectives</h3>
<ol type="1">
<li class="fragment"><strong>Theoretical Foundation</strong>
<ul>
<li class="fragment">Derived Garman-Kohlhagen PDE from first principles</li>
<li class="fragment">Obtained closed-form analytical solutions</li>
<li class="fragment">Computed Greeks analytically</li>
</ul></li>
<li class="fragment"><strong>Numerical Implementation</strong>
<ul>
<li class="fragment">Implemented three finite difference schemes</li>
<li class="fragment">Validated against analytical benchmarks</li>
<li class="fragment">Achieved &lt;0.1% relative error</li>
</ul></li>
<li class="fragment"><strong>Stability &amp; Convergence</strong>
<ul>
<li class="fragment">Proved stability properties (Von Neumann)</li>
<li class="fragment">Verified theoretical convergence rates</li>
<li class="fragment">Confirmed CN as optimal method</li>
</ul></li>
</ol>
</section>
<section id="key-findings" class="slide level2 scrollable">
<h2>Key Findings</h2>
<div id="815749fe" class="cell" data-execution_count="17">
<div class="cell-output cell-output-display">
<div>
<figure>
<p><img data-src="presentation_files/figure-revealjs/cell-18-output-1.png" width="1334" height="471"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="practical-implications" class="slide level2 scrollable">
<h2>Practical Implications</h2>
<h3 id="for-practitioners">For Practitioners</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Pricing &amp; Valuation</strong></p>
<ul>
<li>Use analytical formulas for standard Europeans</li>
<li>CN for exotic payoffs/boundaries</li>
<li>Validate numerical with analytical benchmarks</li>
</ul>
<p><strong>Risk Management</strong></p>
<ul>
<li>Compute Greeks for hedging</li>
<li>Monitor gamma for rebalancing</li>
<li>Track theta for time decay</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Implementation Guidelines</strong></p>
<ol type="1">
<li>Start with M=100, N=200 (CN)</li>
<li>Verify convergence with refinement</li>
<li>Compare against Black-Scholes</li>
<li>Document stability parameters</li>
</ol>
<p><strong>Cost Considerations</strong></p>
<ul>
<li>CN: Best accuracy/cost</li>
<li>BTCS: Fallback if simplicity needed</li>
<li>Never FTCS in production</li>
</ul>
</div></div>
<h3 id="extensions-to-practice">Extensions to Practice</h3>
<ul>
<li>American options (free boundaries)</li>
<li>Barrier options (modified boundaries)</li>
<li>Real market calibration (implied volatility)</li>
</ul>
</section>
<section id="limitations-future-work" class="slide level2 scrollable">
<h2>Limitations &amp; Future Work</h2>
<h3 id="current-limitations">Current Limitations</h3>
<div style="font-size: 0.9em;">
<table class="caption-top" style="width:100%;">
<colgroup>
<col style="width: 33%">
<col style="width: 38%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"><strong>Category</strong></th>
<th style="text-align: left;"><strong>Limitation</strong></th>
<th style="text-align: left;"><strong>Impact</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><strong>Model Assumptions</strong></td>
<td style="text-align: left;">Constant σ, rd, rf</td>
<td style="text-align: left;">Ignores volatility smiles, term structures</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Market Reality</strong></td>
<td style="text-align: left;">No jumps, no transaction costs</td>
<td style="text-align: left;">Simplified dynamics</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Exercise Type</strong></td>
<td style="text-align: left;">European only</td>
<td style="text-align: left;">Can’t handle early exercise</td>
</tr>
<tr class="even">
<td style="text-align: left;"><strong>Numerics</strong></td>
<td style="text-align: left;">Uniform grids</td>
<td style="text-align: left;">Inefficient near boundaries</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Dimensionality</strong></td>
<td style="text-align: left;">1D only</td>
<td style="text-align: left;">Multi-asset requires extension</td>
</tr>
</tbody>
</table>
</div>
<h3 id="future-directions">Future Directions</h3>
<ol type="1">
<li class="fragment"><strong>Advanced Models</strong>
<ul>
<li class="fragment">Local/stochastic volatility (SABR, Heston)</li>
<li class="fragment">Jump-diffusion processes (Merton, Kou)</li>
<li class="fragment">Multi-factor interest rate models</li>
</ul></li>
<li class="fragment"><strong>Numerical Enhancements</strong>
<ul>
<li class="fragment">Adaptive mesh refinement (AMR)</li>
<li class="fragment">Higher-order schemes (4th-order compact)</li>
<li class="fragment">GPU acceleration for real-time pricing</li>
</ul></li>
</ol>
</section>
<section id="future-work-cont." class="slide level2 scrollable">
<h2>Future Work (cont.)</h2>
<ol start="3" type="1">
<li class="fragment"><strong>Exotic Products</strong>
<ul>
<li class="fragment">American options (optimal stopping)</li>
<li class="fragment">Barrier options (knock-in/out)</li>
<li class="fragment">Asian options (path-dependent)</li>
<li class="fragment">Digital options (discontinuous payoffs)</li>
</ul></li>
<li class="fragment"><strong>Market Applications</strong>
<ul>
<li class="fragment">Calibration to real FX option data</li>
<li class="fragment">Implied volatility surface construction</li>
<li class="fragment">Real-time trading systems</li>
<li class="fragment">Comprehensive VaR frameworks</li>
</ul></li>
<li class="fragment"><strong>Algorithmic Trading</strong>
<ul>
<li class="fragment">Automated delta-hedging strategies</li>
<li class="fragment">Greeks-based portfolio optimization</li>
<li class="fragment">High-frequency market making</li>
</ul></li>
</ol>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Research Opportunity</strong></p>
</div>
<div class="callout-content">
<p>Combining ML with PDE solvers for faster calibration and pricing under complex models</p>
</div>
</div>
</div>
</section></section>
<section>
<section id="conclusion" class="title-slide slide level1 center">
<h1>Conclusion</h1>

</section>
<section id="final-remarks" class="slide level2 scrollable">
<h2>Final Remarks</h2>
<h3 id="project-success-criteria-met">Project Success Criteria Met</h3>
<div class="columns">
<div class="column" style="width:50%;">
<p>✓ <strong>Theoretical Rigor</strong> - Complete mathematical derivation - Analytical solution validated - Greeks computed accurately</p>
<p>✓ <strong>Numerical Excellence</strong> - Three schemes implemented - Stability proven &amp; verified - Convergence rates confirmed</p>
</div><div class="column" style="width:50%;">
<p>✓ <strong>Practical Relevance</strong> - Production-ready code - Performance benchmarked - Real-world applications demonstrated</p>
<p>✓ <strong>Educational Value</strong> - Clear methodology - Reproducible results - Extensible framework</p>
</div></div>
<h3 id="the-bottom-line">The Bottom Line</h3>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Recommendation</strong></p>
</div>
<div class="callout-content">
<p><strong>Crank-Nicolson is the clear winner</strong> for production FX option pricing systems: - Unconditionally stable ✓ - Second-order accurate ✓ - Computationally efficient ✓ - Industry-proven ✓</p>
</div>
</div>
</div>
</section>
<section id="thank-you" class="slide level2 scrollable">
<h2>Thank You</h2>
<div style="text-align: center;  margin-top: 100px;">
<p><strong>From Theory to Implementation</strong></p>
<hr>
<p><em>Computational Finance | PDE Methods | Quantitative Analysis</em></p>
<hr>
<p><strong>Key Takeaways:</strong></p>
<p>✓ Rigorous mathematical foundation<br>
✓ Validated numerical methods<br>
✓ Production-ready implementation<br>
✓ Practical risk management tools</p>
<hr>
<p><em>Questions &amp; Discussion</em></p>
</div>
</section>
<section id="references" class="slide level2 scrollable">
<h2>References</h2>
<div style="font-size: 0.85em;">
<p><strong>Foundational Papers:</strong></p>
<ul>
<li><p>Black, F., &amp; Scholes, M. (1973). The Pricing of Options and Corporate Liabilities. <em>Journal of Political Economy</em>, 81(3), 637-654.</p></li>
<li><p>Merton, R. C. (1973). Theory of Rational Option Pricing. <em>Bell Journal of Economics and Management Science</em>, 4(1), 141-183.</p></li>
<li><p>Garman, M. B., &amp; Kohlhagen, S. W. (1983). Foreign Currency Option Values. <em>Journal of International Money and Finance</em>, 2(3), 231-237.</p></li>
</ul>
<p><strong>Numerical Methods:</strong></p>
<ul>
<li><p>Wilmott, P., Howison, S., &amp; Dewynne, J. (1995). <em>The Mathematics of Financial Derivatives</em>. Cambridge University Press.</p></li>
<li><p>Duffy, D. J. (2006). <em>Finite Difference Methods in Financial Engineering</em>. Wiley.</p></li>
<li><p>Tavella, D., &amp; Randall, C. (2000). <em>Pricing Financial Instruments: The Finite Difference Method</em>. Wiley.</p></li>
</ul>
<p><strong>Computational Finance:</strong></p>
<ul>
<li><p>Glasserman, P. (2003). <em>Monte Carlo Methods in Financial Engineering</em>. Springer.</p></li>
<li><p>Hilber, N., Reichmann, O., Schwab, C., &amp; Winter, C. (2013). <em>Computational Methods for Quantitative Finance</em>. Springer.</p></li>
</ul>
</div>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Garman-Kohlhagen FX Option Pricing | Group Project</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="presentation_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="presentation_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="presentation_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="presentation_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: false,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>